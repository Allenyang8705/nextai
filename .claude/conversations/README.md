# 对话记录管理说明

## 目的
记录与 Claude 的所有重要对话，便于回顾和追踪项目开发历程。

## 文件结构
```
.claude/conversations/
├── README.md                    # 本文档
├── 2026-01-15_session.md       # 2026年1月15日对话记录
├── YYYY-MM-DD_session.md       # 其他日期的对话记录
└── ...
```

## 命名规范
- 文件名格式：`YYYY-MM-DD_session.md`
- 使用对话开始的日期
- 如果同一天有多个独立会话，使用：`YYYY-MM-DD_session_2.md`

## 记录格式

### 单个对话项格式
```markdown
### N. 简短标题
**用户请求**: 用户的原始问题或请求

**问题分析**:
- 问题点1
- 问题点2

**解决方案**:
- 解决步骤1
- 解决步骤2

**修改的文件**:
- [file/path](file/path) - 修改说明
- [file/path2](file/path2) - 修改说明2

**结果**: ✅ 成功描述 / ❌ 失败描述

---
```

### 文档整体结构
```markdown
# Claude 对话记录 - YYYY-MM-DD

## 会话概要
- **日期**: YYYY年MM月DD日
- **分支**: branch-name
- **主题**: 主要工作内容

---

## 对话内容

### 1. 第一个对话项
...

### 2. 第二个对话项
...

---

## 技术要点总结

### 技术点1
- 要点说明
- 要点说明

---

## 会话总结

### 完成的工作
1. ✅ 工作项1
2. ✅ 工作项2

### 技术要点总结
...

---

## 会话信息
- **会话日期**: YYYY年MM月DD日
- **工作时长**: 约X小时
- **主要分支**: branch-name
- **功能分支**: feature-branch (已合并)
- **远程仓库**: repo-url
- **提交哈希**: commit-hash
```

## 更新时机

### 何时创建新记录
- 每天开始新会话时，创建当日期的新文件

### 何时更新现有记录
- ✅ 完成某个功能或修复 bug 后
- ✅ 用户提出重要问题或需求后
- ✅ 进行重大代码变更后
- ✅ 会话结束时（总结全天工作）

## 最佳实践

### 1. 及时记录
- 不要等到会话结束才记录，应该在每个重要对话后立即更新
- 避免遗漏重要细节

### 2. 详细程度
- 记录关键决策的原因
- 记录遇到的问题和解决方案
- 记录修改的文件和代码位置（使用行号链接）
- 不必记录每个简单的操作（如查看文件）

### 3. 文件链接
使用 markdown 链接格式引用文件，方便点击跳转：
```markdown
[miniprogram/pages/login/login.js](miniprogram/pages/login/login.js)
[miniprogram/pages/login/login.js:191](miniprogram/pages/login/login.js#L191)
```

### 4. 代码片段
- 只记录关键的代码片段
- 使用对比格式展示修改前后

### 5. 使用 emoji
- ✅ 成功/完成
- ❌ 失败/错误
- ⚠️ 警告/注意
- 💡 提示/建议
- 📝 说明/注释

## 自动更新机制

### 手动更新触发器
当以下情况发生时，应该主动更新对话记录：
1. 完成用户请求的功能
2. 修复 bug
3. 重要的代码变更
4. 用户提出新需求
5. 会话即将结束时

### 记录检查清单
- [ ] 用户请求是否记录？
- [ ] 问题分析是否清晰？
- [ ] 解决方案是否完整？
- [ ] 修改的文件是否列出？
- [ ] 结果是否标注？
- [ ] 会话总结是否更新？

## 示例参考
查看现有记录文件：
- [2026-01-15_session.md](2026-01-15_session.md)

## 注意事项
1. **不要记录敏感信息**：
   - 密码、密钥
   - 用户个人数据
   - API 令牌

2. **保持客观**：
   - 记录事实，而非情绪
   - 清晰标注成功/失败

3. **便于搜索**：
   - 使用清晰的标题
   - 使用关键词
   - 添加适当的标签

4. **版本控制**：
   - 对话记录文件纳入 git 管理
   - 定期提交到远程仓库
   - 可以在 `.gitignore` 中排除敏感信息

## 维护责任人
- 项目开发者负责维护对话记录
- Claude AI 助手协助记录和整理
