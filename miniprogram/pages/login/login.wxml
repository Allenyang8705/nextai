<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- Logo 区域 -->
  <view class="logo-section">
    <view class="logo-icon">🎤</view>
    <text class="app-name">语音记录</text>
    <text class="app-slogan">记录每一刻灵感</text>
  </view>

  <!-- 登录表单 -->
  <view class="form-section">
    <!-- 切换登录/注册 -->
    <view class="tab-bar">
      <view
        class="tab-item {{isLogin ? 'active' : ''}}"
        bindtap="switchTab"
        data-type="login"
      >
        登录
      </view>
      <view
        class="tab-item {{!isLogin ? 'active' : ''}}"
        bindtap="switchTab"
        data-type="register"
      >
        注册
      </view>
    </view>

    <!-- 登录表单 -->
    <view wx:if="{{isLogin}}" class="form-content">
      <view class="input-group">
        <text class="input-label">手机号/邮箱</text>
        <input
          class="input-box"
          type="text"
          placeholder="请输入手机号或邮箱"
          value="{{loginForm.account}}"
          bindinput="onLoginAccountInput"
        />
      </view>

      <view class="input-group">
        <text class="input-label">密码</text>
        <input
          class="input-box"
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="请输入密码"
          value="{{loginForm.password}}"
          bindinput="onLoginPasswordInput"
        />
        <view class="eye-icon" bindtap="togglePassword">
          <text>{{showPassword ? '🙈' : '👁️'}}</text>
        </view>
      </view>

      <view class="form-actions">
        <checkbox checked="{{rememberMe}}" bindtap="toggleRemember" />
        <text class="remember-text">记住登录状态</text>
      </view>

      <button class="btn-primary btn-block" bindtap="handleLogin" disabled="{{loading}}">
        {{loading ? '登录中...' : '登录'}}
      </button>
    </view>

    <!-- 注册表单 -->
    <view wx:else class="form-content">
      <view class="input-group">
        <text class="input-label">手机号</text>
        <input
          class="input-box"
          type="number"
          placeholder="请输入手机号"
          value="{{registerForm.phone}}"
          bindinput="onRegisterPhoneInput"
        />
      </view>

      <view class="input-group">
        <text class="input-label">邮箱（选填）</text>
        <input
          class="input-box"
          type="text"
          placeholder="请输入邮箱"
          value="{{registerForm.email}}"
          bindinput="onRegisterEmailInput"
        />
      </view>

      <view class="input-group">
        <text class="input-label">密码</text>
        <input
          class="input-box"
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="至少8位，包含字母和数字"
          value="{{registerForm.password}}"
          bindinput="onRegisterPasswordInput"
        />
      </view>

      <view class="input-group">
        <text class="input-label">确认密码</text>
        <input
          class="input-box"
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="请再次输入密码"
          value="{{registerForm.confirmPassword}}"
          bindinput="onRegisterConfirmPasswordInput"
        />
        <view class="eye-icon" bindtap="togglePassword">
          <text>{{showPassword ? '🙈' : '👁️'}}</text>
        </view>
      </view>

      <view class="agreement">
        <checkbox checked="{{agreeAgreement}}" bindtap="toggleAgreement" />
        <text class="agreement-text">
          我已阅读并同意
          <text class="link" bindtap="showUserAgreement">《用户协议》</text>
          和
          <text class="link" bindtap="showPrivacyPolicy">《隐私政策》</text>
        </text>
      </view>

      <button
        class="btn-primary btn-block"
        bindtap="handleRegister"
        disabled="{{loading || !agreeAgreement}}"
      >
        {{loading ? '注册中...' : '注册'}}
      </button>
    </view>
  </view>

  <!-- 底部提示 -->
  <view class="footer">
    <text class="footer-text">登录即表示同意用户协议和隐私政策</text>
  </view>
</view>
